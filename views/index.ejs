<html>

<head>
  <title>URL Shortner</title>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/series-label.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/export-data.js"></script>
  <script src="https://code.highcharts.com/modules/accessibility.js"></script>
  <style>
    .highcharts-figure,
    .highcharts-data-table table {
      min-width: 360px;
      max-width: 800px;
      margin: 1em auto;
    }

    .highcharts-data-table table {
      font-family: Verdana, sans-serif;
      border-collapse: collapse;
      border: 1px solid #EBEBEB;
      margin: 10px auto;
      text-align: center;
      width: 100%;
      max-width: 500px;
    }

    .highcharts-data-table caption {
      padding: 1em 0;
      font-size: 1.2em;
      color: #555;
    }

    .highcharts-data-table th {
      font-weight: 600;
      padding: 0.5em;
    }

    .highcharts-data-table td,
    .highcharts-data-table th,
    .highcharts-data-table caption {
      padding: 0.5em;
    }

    .highcharts-data-table thead tr,
    .highcharts-data-table tr:nth-child(even) {
      background: #f8f8f8;
    }

    .highcharts-data-table tr:hover {
      background: #f1f7ff;
    }
  </style>
</head>

<body>
  <form action="/shortUrls" method="POST">
    <input placeholder="Url" type="url" name="fullUrl" id="fullUrl">
    <button class="btn btn-success" type="submit">Create</button>
  </form>

  <table border="1">
    <thead>
      <tr>
        <th>URL</th>
        <th>Output</th>
        <th>Views</th>
      </tr>
    </thead>
    <tbody>
      <% shortUrls.forEach(shortUrl => { %>
      <tr>
        <td><a href="<%= shortUrl.full %>"><%= shortUrl.full %></a></td>
        <td><a href="<%= shortUrl.short %>"><%= shortUrl.short %></a></td>
        <td><%= shortUrl.clicks %></td>
      </tr>
      <% }) %>
    </tbody>
  </table>
  </div>
  <figure class="highcharts-figure">
    <div id="container"></div>
    <p class="highcharts-description">
      Basic line chart showing trends of view count.
    </p>
  </figure>
</body>
<script>
  Highcharts.chart('container', {

    title: {
      text: 'Url shortner visit trends'
    },


    yAxis: {
      title: {
        text: 'Urls'
      }
    },

    xAxis: {
      accessibility: {
        rangeDescription: 'Hours'
      }
    },

    legend: {
      layout: 'vertical',
      align: 'right',
      verticalAlign: 'middle'
    },

    plotOptions: {
      series: {
        label: {
          connectorAllowed: false
        },
        pointStart: 0
      }
    },

    series: chartArray,

    responsive: {
      rules: [{
        condition: {
          maxWidth: 500
        },
        chartOptions: {
          legend: {
            layout: 'horizontal',
            align: 'center',
            verticalAlign: 'bottom'
          }
        }
      }]
    }

  });
</script>

</html>